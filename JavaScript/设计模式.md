# 设计模式

+ 单例模式

  保证一个类仅有一个实例，并提供一个访问它的全局访问点。实现的方法为先判断实例存在与否，如果存在则直接返回，如果不存在就创建了再返回，这就确保了一个类只有一个实例对象。

+ 发布订阅

  发布的一方和订阅的一方没有直接关系，中间需要一个桥梁进行连接

+ 观察者模式（vue的双向绑定）

  被观察者与观察者之间有关系，被观察者要放到观察者里面去。被观察者要提供一个更新的方法，当观察者中的数据发生变化的时候，需要执行被观察者的update方法。

  ```javascript
  function Observer () {
    this.state = '不开心的'
    this.subList = []
  }
  Observer.prototype.attach = function (sub) {
    this.subList.push(sub)
  }
  Observer.prototype.setState = function (newState) {
    this.state = newState
    this.subList.forEach(fn => fn.update(this.state))
  }
  function Subject (name, target) {
    this.name = name
    this.target = target
  }
  
  Subject.prototype.update = function (newState) {
    console.log(newState)
  }
  let o = new Observer()
  let s1 = new Subject('我', o)
  let s2 = new Subject('我媳妇', o)
  o.attach(s1)
  o.attach(s2)
  o.setState('开心')
  ```

+ Promise

  ```javascript
  // promise 是一个类
  // new Promise时需要传递一个执行器(函数)
  new Promise(function(resolve, reject){
    if (成功的状态) {
      resolve('成功')
    } else {
    // 失败的状态
      reject('失败')
    }
  }).then(res => {
    // ... 成功之后的回调
  }, err => {
    // ... 失败之后的回调
  })
  
  ```
  
  