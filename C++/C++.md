# C/C++语言笔记

+ `gcc`指令用来编译一个`.c`文件并生成一个默认的可执行文件
+ 注意变量和常量的区别——常量就是内存空间内部不能改变的量
+ 数据类型——表示计算机内存的访问规则，一个字节就是一个地址，不同的数据类型一次性访问的字节数不一样，除此之外，还有对这块内存的操作
+ 运算符的优先级
+ 指针是一种数据类型，存放一块内存的地址，数据类型不占用空间，但是变量是占内存空间的
+ 数组是一种数据类型
+ 变量的作用域和生命周期



## 指针

对指针的思考：我们每声明一个变量，都会在其中放入一个值，如果我们不放，编译器会帮我们自动赋一个初始值，也就是说我们每次声明一个变量，内存中就会给这个变量自动分配一块空间，这个空间到底是哪一块空间，我们不得而知，为了解决这个问题，出现了指针。所谓指针就是指向一块内存区域的变量，这个变量存储的是目标存储空间的地址。

`int a = 3`这条语句，在笔者理解过来，就是——在a家放3个人，但一个家总得有个地址才能方便别人找到，而这个地址又是计算机自动分配的，所以，我们有的时候需要使用指针来获得计算机某一块明确的地址。

```c
int a = 3;
int* p = &a;
int (*p)[3]// 数组指针，访问方式是3个int，p++之后向后走12个字节
  
int const *p = &a; // 表示指向一个常量的指针
int * const p = &a; //表示声明一个指针，指向的地址不能变化  
```

指针的声明如上，笔者还是认为把`*`放在靠近类型的一边，这是一条声明语句，p变量是一个指针变量，指向的是一个int类型的变量，等号右边通过&来取a变量的地址，然后赋给p变量。

对于数组来说，数组名是一个指向数组中第一个元素的常量指针。

`double balance[50];`这条语句中，balance是一个指向数组第一个元素的指针。



## 变量作用域

+ 局部变量：在函数或一个代码块内部声明的变量
+ 形式参数：在函数参数的定义中声明的变量
+ 全局变量：在所有函数外部声明的变量

> 当局部变量被定义时，系统不会对其初始化，必须自行初始化，但是系统会初始化全局变量。变量的定义是要为变量分配空间。变量的声明是不需要分配空间。声明变量是变量作用域的扩充。



typedef的使用要遵循三部曲

+ 定义类型的变量
+ 在第一部的前边加上typedef，这时候，原来的变量或者常量就是原来的数据类型的别名
+ 使用类型别名定义变量
+ `typedef char *str_t`这一句`*`是类型，所以`str_t p1, p2`就等价于`char *p1, *p2`
+ `typedef int arr_t[3]`这一句类型是`int[3]`，arr_t是别名，所以`arr_t arr_one`语句，`arr_one`就是一个拥有12个字节内存的变量，`arr_t arr_two[2]`表示两个元素，每个元素是一个`int [3]`

## Unix C

+ 预处理器：
  1. 将`.c`文件转化为`.i`文件
  2. 将注释消除
  3. 预处理指令的执行，所以以`#`开头的都是预处理指令（`#include`,`#define`,`#if...#else...#endif`）
+ 编译
  1. 将`.i`文件编译成`.s`文件，即将预处理后的程序编译成汇编语言
+ 汇编：
  1. 将`.s`文件会变为目标文件`.o`
+ 将`.o`文件链接绑定到运行时文件

> 链接： 运行时文件：  函数库：