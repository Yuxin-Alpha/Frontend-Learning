# Go语言笔记

## 初探

```go
// 将该文件打包,go中每个文件都必须属于一个包
package main
// 引入该包，为了使用该包中的API
import "fmt"
// fuc,表示后面是一个函数，main是我们程序的入口
func main() {
	fmt.Println("hello")
}
```

1. 控制台执行`go build main.go`后会编译生成一个可执行文件

   > Linux或者Mac下可以执行`./main`运行可执行文件

2. 控制台执行`go run main.go`可在终端之间运行源码（速度有点慢）

区别：如果我们需要将其拷贝到别的地方，其实可执行文件更加理想，因为.go文件在编译后，会自动将其运行需要的东西一起打包到可执行文件中。

> 1. 以.go结尾
> 2. 执行入口是main()函数
> 3. 一行只写一条语句
> 4. 引入包后必须使用
> 5. 定义变量后必须使用
> 6. 注释尽量使用行注释
> 7. 标识符首字母大写，可以被其他包访问，小写只能被本包访问

## 语法

+ 转义字符：

  > \t 制表符，用于排版
  >
  > \n换行符
  >
  > \ 转义需要转义的字符

+ 变量

  内存中的标识，类似于房间的门牌号

  ```go	
  // 变量声明
  var num int = 10;
  // 或者
  name := "tom"
  ```

  一次性声明多个变量:

  ```go
  // 方式一
  var n1, n2, n3 int
  fmt.Println("n1=", n1, "n2=", n2, "n3=", n3)
  // 方式二
  var n1, name, n3 = 11, "tom", 888
  // 方式三
  n1, name, n3 := 11, "tom", 888
  ```

  > 函数外部声明的变量就是全局变量

  ```go
  var (
  	n3 = 11
      n4 = 22
      name_u = "jack"
  )
  ```

  > 变量在同一个区域内的可以变化，但是不能修改类型
  >
  > 不能重复定义
  >
  > '+'运算，数值进行相加，字符串进行拼接

+ 数据类型

  - 基本数据类型，
    1. int，int8，int16，int32，int64
    2. float，float32，float64
    3. 无字符型，使用byte来存储单个字符
    4. bool
    5. string

  - 复杂数据类型，
    1. 指针
    2. 数组
    3. 结构体（类似class）
    4. 管道（高并发）
    5. 函数（闭包）
    6. 切片（动态数组）
    7. 接口
    8. map（集合）

### 整型

> Int 与uint

查看某个变量的数据类型，字节大小(空间使用够用，使用小的，不然占据的空间太大了)

```go
// 数据类型
fmt.Printf("n1 的类型%T"，n1)
// 字节大小
fmt.Printf("n1 的类型%T，占用的字节数%d"，n1，unsafe.Sizeof(n2))
```

多包引入

```go
import (
	"fmt"
    "unsafe"
    //...
)
```

### 浮点型

> Golang的浮点类型默认是float64
>
> 通常应该使用float64，避免精度损失

### 字符类型

Golang中通过`byte`来表示，由字节组成

```go
var c1 byte = 'a' // 97
var c2 byte = '0' // 48
```

输出`byte`值时，就是输出了对应的码值（ASCII）

```go
var c1 byte = 'a' // 97
fmt.Println("c1=%c", c1) // 'a'
var c1 byte = '北' // 97
fmt.Println("c1=%c", c1) // 报错，超出长度，可以用int保存
```

> 字符常量通过' '存放,其本质是存放一个整数

### 字符串

```go
var address string = "我真帅"
```

> 双引号会识别转义字符，可以通过反引号``进行包裹，会输出普通文本

基本数据类型转换：

- 需要显示转换，并且不能自动转换

  ```go
  var i int = 100 
  var n1 float32 = float32(i) // 显式将i转换成float32类型
  ```

  > 注意：转换过后得到的变量如果想要对其他变量赋值，这两变量的数据类型必须一样。
  >
  > 数据转换只是转换该变量的数值类型，变量的类型并没有改变

- string类型转换

  ```go
  var num1 int = 99
  fmt.Sprintf("%d", num1)
  ```


## 指针

1. 对于基本数据类型，变量存的就是一个值，为值类型

   观察一下：`var num int = 10`变量在内存中自动与一块小块内存关联，这块小内存有一个内存地址（0x5153458785），可以通过&num取得该变量的内存空间地址。

2. 指针类型：指针变量存的是一个地址，这个地址指向的空间存的才是值

   `var ptr *int = &num`。ptr是一个指针变量，类型是`*int`，表示指向一个int类型的数据内存空间，指向的是num变量所在的内存空间。通过`*ptr`可以查询num存储的变量值。

   `*int`类型的指针只能指向变量类型是`int`类型的内存空间

3. 内存分为栈区和堆区，值类型的存储通常在栈区，引用类型通常在堆区

> 从键盘输入，并接受

```go
var name string
fmt.Println("请输入姓名")
// 程序会等待输入，以回车为结束信号
fmt.Scanln(&name)
// 第二种
fmt.Scanf()
```

## 流程控制

`if`语法

```go
if tag = true {
    // coding
} else {
    // coding
}
```

`switch`语法：不用带`break`

```go
switch tag {
    case 1: // coding
    case 2: // coding
    default: // coding
}
```

## 循环控制

```go
for i := 1; i <= 10; i++ {
    // coding
}
```

> `break`使用：用于跳出循环

